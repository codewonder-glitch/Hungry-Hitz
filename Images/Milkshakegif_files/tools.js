var width,height,percent,maxscale=5,draggable=1;var filedata=[],addtextobj={},strings=[];var ddData;var newsize,factor;var jcrop_api;factor=parseFloat(1);var href=window.location.href;if(href.substr(href.length-1)==='/'){href=href.substr(0,href.length-1);}
href=href.substr(href.lastIndexOf('/')+1)
if(href.match(/([a-z]+)/)&&href.match(/\?/)){var animation_id=href.substring(1);}else{var animation_id=parseInt(href);}
$(document).ready(function(){jQuery.browser={};(function(){jQuery.browser.msie=false;jQuery.browser.version=0;if(navigator.userAgent.match(/MSIE ([0-9]+)\./)){jQuery.browser.msie=true;jQuery.browser.version=RegExp.$1;}})();$("#slider").slider({min:10,max:300,value:100,slide:function(event,ui){slideval(ui.value);}});var fileinfo_template=$('#fileinfo').html();$('input[type=text]').keyup(function(e){if(e.keyCode===37||e.keyCode===39){return;}
var id=$(this).attr('id');var newval=$(this).val();switch(id){case "percent":slideval(newval);break;case "width":$('#percent').val(parseInt((percent*newval)/width));$('#height').val(parseInt((height*newval)/width));break;case "height":$('#percent').val(parseInt((percent*newval)/height));$('#width').val(parseInt((width*newval)/height));break;}});function slideval(value)
{$("#percent").val(value);$('#width').val(parseInt((width*value)/100));$('#height').val(parseInt((height*value)/100));$('.ui-slider-handle').blur();}
$("#files").hover(function(){$("#upload-button").addClass('hover');},function(){$("#upload-button").removeClass('hover');});$("#files").kendoUpload({localization:{select:'',dropFilesHere:'',statusDone:'',statusUploaded:''},multiple:false,showFileList:false,async:{saveUrl:"/ajax/upload.php?type=save&method="+$('#method').val(),autoUpload:true},upload:onUpload,select:onSelect,success:onSuccess,progress:onProgress,complete:onComplete});function onSelect(e){var files=e.files;var fileSizeLimit=20;switch($('#method').val()){case "video":fileSizeLimit=50;break;default:fileSizeLimit=20;break;}
var fileLimitOK=getFileInfo(e,fileSizeLimit)[0];if(fileLimitOK===false){alert("Image file limit is "+fileSizeLimit.toString()+"Mb.");e.preventDefault();return false;}
$('#width').val('');$('#height').val('');$('#percent').val('');$('#fileinfo').hide();$('#finish-button').hide();$('#croparea').hide();$('.filechange').hide();$('#pleasewait').slideDown('fast');$('#slider').slider('value',100);if($('#custom-quality').length){$('#optimization').val('jpg');$('#custom-jpeg-quality').hide();$('#custom-quality').val('');}
$('#fileinfo').html(fileinfo_template);$('#paste-url').css({width:"200px",height:"20px","text-align":"center"}).html("OR <div>PASTE IMAGE URL</div>");switch($('#method').val()){case "add-text":{$('.str-font').ddslick('destroy');$('.colpick').remove();break;}}
$.each(files,function(index,value){});}
function getFileInfo(e,fslimit)
{return $.map(e.files,function(file){if(parseInt(file.size)>parseInt(1024*1024*parseInt(fslimit))){return false;}
return true;});}
function onComplete(e){}
function onUpload(e){}
function onSuccess(e){uploadSuccess(e);}
function onProgress(e){$('#progress').show();$('#upload-button').text('').css('height','37px');for(i in e.files){var totalWidth=parseInt($('#progress').css('width'));var curWidth=(e.percentComplete*totalWidth)/100;$('#progress-bar').css('width',curWidth);}}
function uploadSuccess(e)
{var resp=e.response;var fileinfo=fileinfo_template;draggable=1;addtextobj={};strings=[];filedata['size']=resp.size;filedata['url']=resp.url;filedata['width']=resp.width;filedata['height']=resp.height;fileinfo=fileinfo.replace('[FILENAME]',resp.name);fileinfo=fileinfo.replace('[WIDTH]',resp.width);fileinfo=fileinfo.replace('[HEIGHT]',resp.height);fileinfo=fileinfo.replace('[SIZE]',Number(resp.size/(1024*1024)).toFixed(2)+' MB');var respcol;if(resp.colors){respcol=resp.colors+' colors';filedata['colors']=resp.colors;}else{respcol='';}
fileinfo=fileinfo.replace('[COLORS]',respcol);var respdelay;if(resp.delay){respdelay=resp.delay+' ms';filedata['delay']=resp.delay;}else{respdelay='';}
fileinfo=fileinfo.replace('[DELAY]',respdelay);width=resp.width;height=resp.height;percent=100;$('#fileinfo').html(fileinfo);$('#tmpfilename').val(resp.url);$('#width').val(resp.width);$('#height').val(resp.height);$('#percent').val(percent);$('#pleasewait').hide();$('#fileinfo').slideDown('slow');$('#progress-bar').css('width',0);$('#progress').hide();var buttonStr="UPLOAD GIF";if($('#method-full').length){switch($('#method-full').val()){case "png-optimizer":buttonStr="UPLOAD PNG";break;case "jpeg-optimizer":buttonStr="UPLOAD JPEG";break;}}
$('#upload-button').text(buttonStr);$('#finish-button').show();switch($('#method').val())
{case "add-text":{animation_id=false;var template=$('#addtext-template').text();template=template.replace(/\[\[NUM\]\]/g,draggable);$('#dimensions-addtext').html(template).show();addTextInit();showImage(resp,"add-text");break;}
case "crop":{showImage(resp,"crop");break;}
case "optimizer":{showImage(resp,"optimizer");break;}
case "split":case "reverser":case "rotate":{showImage(resp);break;}}}
$('.content').on('click','.reset-link',function(e){e.preventDefault();switch($('#method').val())
{case "resizer":{$('#width').val(width);$('#height').val(height);$('#percent').val('100');$('#slider').slider('value',100);break;}
case "add-text":{$('#str-font-1').ddslick('select',{index:0});$('#str-size-1').val('30');$('#str-angle-1').val('0');$('#str-border-1').prop('checked','true');$('#str-fontcolor-1').colpickSetColor('ffffff').css('background-color','#ffffff');$('#current-fontcolor').val('ffffff');$('#str-bordercolor-1').colpickSetColor('000000').css('background-color','#000000');$('#current-bordercolor').val('000000');$('#str-text-1').val('').focus();break;}}});$('#paste-url').click(function(){$('#paste-url').css({width:"485px",height:"40px","text-align":"left","vertical-align":"top"}).html("<input type=text name=url id=url /><input type=button id=upload-url name=upload-url value='UPLOAD' /><div id=upload-error></div>");$('#url').focus();});$('#paste-url').on('click','#upload-url',function(e){e.preventDefault();$('#upload-error').html('').hide();$.ajax({type:"POST",url:"/ajax/upload.php?type=save&method="+$('#method').val()+"&source=url",cache:false,data:"link="+encodeURIComponent($('#url').val())}).done(function(html){if(html!=="ERROR_FILE_TYPE"){json=JSON.parse(html);var e={response:json};$('#fileinfo').html(fileinfo_template);uploadSuccess(e);}else{$('#paste-url').css('height','50px');$('#upload-error').html("Error: GIF / JPG / PNG only").show();}});});$('#doit-button').click(function(){var postArr={};$('#doit-button').blur();switch($('#method').val())
{case "resizer":{if($('#percent').val()==="100"){alert("Please change the GIF size first.");return;}
if(parseInt($('#percent').val())>300){alert("The maximum is 300%.");$('#slider').slider('value','300');slideval(300);return;}
if($('#width').val()*$('#height').val()>2000000){alert("Canvas size is too big. Please, make it smaller.");return;}
postArr={m:$('#method').val(),f:$('#tmpfilename').val(),w:$('#width').val(),h:$('#height').val()};break;}
case "add-text":{$('div[id^="draggable-"]').each(function(){var id=$(this).attr('id').replace(/draggable-/,'');var pos=$(this).position();var dimW=$(this).width();var dimH=$(this).height();addtextobj['str'+id]={coords:[pos.left,pos.top],dimensions:dimW+'x'+dimH,font:$('#input-draggable-'+id).val()};});if(!$.isEmptyObject(addtextobj)){var postArr={m:$('#method').val(),f:$('#tmpfilename').val(),obj:JSON.stringify(addtextobj)};}else{alert("Add some text first.");return;}
break;}
case "reverser":{postArr={m:$('#method').val(),f:$('#tmpfilename').val(),flip_h:$('#flip-h').is(':checked'),flip_v:$('#flip-v').is(':checked'),reverse:$('#reverse').is(':checked')};break;}
case "rotate":{postArr={m:$('#method').val(),f:$('#tmpfilename').val(),flip_h:$('#flip-h').is(':checked'),flip_v:$('#flip-v').is(':checked'),rotate_90:$('#rotate-90').is(':checked'),rotate_270:$('#rotate-270').is(':checked'),rotate:$('#rotate').is(':checked'),rotate_value:$('#rotate-value').val()};break;}
case "crop":{postArr={m:$('#method').val(),f:$('#tmpfilename').val(),crop_x:$('#x').val(),crop_y:$('#y').val(),crop_w:$('#w').val(),crop_h:$('#h').val()};break;}
case "split":{postArr={m:$('#method').val(),f:$('#tmpfilename').val(),coalesce:$('#coalesce').is(':checked')};break;}
case "optimizer":{if($("#method-full").length){var customQuality='';if($('#custom-quality').length){customQuality=$('#custom-quality').val();}else{customQuality='';}
postArr={m:$('#method').val(),mfull:$('#method-full').val(),cq:customQuality,f:$('#tmpfilename').val(),optimization:$('#optimization').val()};}else{postArr={m:$('#method').val(),f:$('#tmpfilename').val(),optimization:$('#optimization').val(),colors:$('#colors').val(),delay:$('#delay').val()};}
break;}}
$(this).attr({'disabled':true,'title':'Processing...'});$('#fileinfo').hide();$('#pleasewait span.wait-text').text("Please wait...");$('#pleasewait').show();$.ajax({type:"POST",url:"/qb.php",cache:false,data:postArr}).done(function(html){var obj=JSON.parse(html);var maxtimes=60,times=0;var running=false;var request='?folder='+obj.folder+'&hash='+obj.hash+
'&ext='+obj.ext+'&method='+$('#method').val();if($("#method-full").length){request+='&mfull='+$("#method-full").val();}
var timer=setInterval(function(){if(!running){$.ajax({url:'/find.php'+request,type:"GET",cache:false,beforeSend:function(){running=true;},success:function(data,status,xhr){if(data){var size=(data.match(/ MB/))?Number(filedata['size']/(1024*1024)).toFixed(2)+' MB':Number(filedata['size']/1024).toFixed(1)+' KB';data=data.replace(/\[FOLDER\]/g,obj.folder);data=data.replace(/\[HASH\]/g,obj.hash);if(filedata['url']){data=data.replace('[SOURCE]',filedata['url'].replace(/.gif|.png|.jpg|.jpeg/,''));}
data=data.replace('[SIZE]',size);data=data.replace('[WIDTH]',filedata['width']);data=data.replace('[HEIGHT]',filedata['height']);data=data.replace('[COLORS]',filedata['colors']);data=data.replace('[DELAY]',filedata['delay']+' ms');$('#pleasewait').hide();$('#fileinfo').html(data).show();$('#doit-button').attr({'disabled':false,'title':''});clearInterval(timer);}
if(times==5){$('#pleasewait span.wait-text').text("Processing... This may take a while...");}
if(times===maxtimes){console.log("Error 005");$('#pleasewait').hide();$('#fileinfo').html("Error 005: Something went wrong. Please report.").show();$('#doit-button').attr({'disabled':false,'title':''});clearInterval(timer);}
running=false;}});times++;}},1000);});});if(animation_id){$('#type').val('url');$('#pleasewait').show();var fileinfo=fileinfo_template;$.ajax({url:"/ajax/get.php",type:"POST",cache:false,data:{id:animation_id}}).done(function(html){if(html!==""&&html!="{}"){var obj=JSON.parse(html);filedata['size']=obj.size;filedata['url']=obj.id;filedata['width']=obj.width;filedata['height']=obj.height;fileinfo=fileinfo.replace('[SOURCE]',animation_id);fileinfo=fileinfo.replace('[FILENAME]',obj.name);fileinfo=fileinfo.replace('[WIDTH]',obj.width);fileinfo=fileinfo.replace('[HEIGHT]',obj.height);fileinfo=fileinfo.replace('[SIZE]',Number(obj.size/(1024*1024)).toFixed(2)+' MB');if(obj.colors){filedata['colors']=obj.colors;fileinfo=fileinfo.replace('[COLORS]',obj.colors);}
if(obj.delay){filedata['delay']=obj.delay;fileinfo=fileinfo.replace('[DELAY]',obj.delay);}
width=obj.width;height=obj.height;percent=100;$('#fileinfo').html(fileinfo);$('#tmpfilename').val(obj.fullname);$('#width').val(obj.width);$('#height').val(obj.height);$('#percent').val(percent);$('#pleasewait').hide();$('#fileinfo').slideDown('slow');$('#progress').hide();$('#finish-button').show();switch($('#method').val())
{case "crop":{showImage(obj,"crop");break;}
case "add-text":{var template=$('#addtext-template').text();template=template.replace(/\[\[NUM\]\]/g,draggable);$('#dimensions-addtext').html(template).show();addTextInit();showImage(obj,"add-text");break;}
case "optimizer":{showImage(obj,"optimizer");break;}
default:case "reverser":case "split":case "rotate":{showImage(obj);break;}}}
else{$('#pleasewait').hide();$('#fileinfo').html('File not found.').show();}});}
$('#optimization').change(function(){$(this).blur();var optval=$(this).val();if(optval.match(/^color/)){$('#color-amount').show();$('#colors').focus();}
else{$('#color-amount').hide();$('#colors').val('');}
if(optval.match(/^frame/)){$('#frame-delay').show();$('#delay').focus();}
else{$('#frame-delay').hide();$('#delay').val('');}});$('#dimensions-addtext').on('click','button[id^="submit-text-"]',function(){var button_id=$(this).attr('id').replace(/submit-text-/,'');var edit_status=$('#edit-status').val();ddData=$('#str-font-'+button_id).data('ddslick');getArr={text:$('#str-text-'+button_id).val(),font:ddData.selectedData.value,fontIndex:ddData.selectedIndex,fontColor:$('#current-fontcolor').val(),size:$('#str-size-'+button_id).val(),angle:$('#str-angle-'+button_id).val(),border:$('#str-border-'+button_id).is(":checked"),borderColor:$('#current-bordercolor').val(),nobody:true,rnd:(new Date).getTime()};if(edit_status!==""){button_id=edit_status;}
$.ajax({method:"GET",cache:false,url:"/ajax/font.php",data:getArr}).done(function(html){var div_id=draggable;var div_exists=false;var json=JSON.parse(html);var dr='#draggable-'+div_id;var getRequest='text='+getArr['text']+
'&font='+getArr['font']+'&angle='+getArr['angle']+
'&border='+getArr['border']+'&fontColor='+getArr['fontColor']+
'&borderColor='+getArr['borderColor']+'&dimensions='+getArr['dimensions']+
'&size='+getArr['size']+'&rnd='+getArr['rnd'];if(edit_status!==""){dr='#draggable-'+button_id;div_id=button_id;var divpos=$(dr).offset();$(dr).draggable('destroy');$(dr).remove();div_exists=true;}else{div_id=draggable;}
strings[div_id]=getArr;$('#drag-container').append('<div class="draggable" id="draggable-'+div_id+'" style="width:'+json.width+'px;height:'+json.height+'px;"></div>');$(dr).append('<input type=hidden id="input-draggable-'+div_id+'" name="draggableArray[]" value="'+encodeURIComponent(getRequest)+'" />');$(dr).append('<span class="draggable-icon icon-remove" id="remove-draggable-'+div_id+'"><img src="/i/icon-remove.png?3" width=12 height=12 alt="Remove" title="Remove" /></span>');$(dr).append('<span class="draggable-icon icon-edit" id="edit-draggable-'+div_id+'"><img src="/i/icon-edit.png?3" width=14 height=14 alt="Edit" title="Edit" /></span>');$(dr).append('<img src="/ajax/font.php?'+getRequest+'" alt="" />');$(dr).draggable({containment:"#drag-container"});if(div_exists){$(dr).offset(divpos);$('.submit-text').text('ADD TEXT');$('#edit-status').val('');$(dr).css('border','1px dotted black');}
draggable++;});});$('.addtextpos').click(function(){var posid=$(this).attr('id');var values=posid.split('-');var el=$('#draggable-'+values[1]);switch(values[2]){case "NW":el.css({"top":"10px","left":"10px"});break;}})
$("#croparea").on('mousedown','.icon-remove',function(){var id=$(this).attr('id').replace(/remove-draggable-/,'');$('#draggable-'+id).draggable('disable');});$("#croparea").on('click','.icon-remove',function(){var id=$(this).attr('id').replace(/remove-draggable-/,'');$('#draggable-'+id).draggable('destroy');$('#draggable-'+id).remove();delete strings[id];delete addtextobj['str'+id];});$("#croparea").on('click','.icon-edit',function(){editString($(this));});$("#croparea").on('dblclick','div[id^="draggable-"]',function(){editString($(this));});function editString(thisObj)
{var id=thisObj.attr('id').replace(/edit-draggable-/,'');id=id.replace(/draggable-/,'');var stringData=strings[id];var tmp_id=id;var default_id=1;$('div[id^="draggable-"]').css('border','1px dotted black');$('#draggable-'+id).css('border',"1px dotted white");$('#str-text-'+default_id).val(stringData.text);$('#str-size-'+default_id).val(stringData.size);$('#str-angle-'+default_id).val(stringData.angle);$('#str-font-'+default_id).ddslick('select',{index:stringData.fontIndex});$('#str-fontcolor-'+default_id).colpickSetColor(stringData.fontColor).css('background-color','#'+stringData.fontColor);$('#current-fontcolor').val(stringData.fontColor);$('#str-bordercolor-'+default_id).colpickSetColor(stringData.borderColor).css('background-color','#'+stringData.borderColor);$('#current-bordercolor').val(stringData.borderColor);if(stringData.border){$('#str-border-'+default_id).prop('checked',true);}else{$('#str-border-'+default_id).prop('checked',false);}
$('#edit-status').val(tmp_id);$('#submit-text-'+default_id).text('EDIT TEXT');$('#str-text-'+default_id).focus();$('#dimensions-addtext').effect("highlight",{color:"#cccccc"},800);}});function showChanges()
{var changedSize=showReduced(newsize,filedata['size']);var tmpl1=$('.filechange').html();tmpl1=tmpl1.replace('[SIZE-CHANGE]',changedSize);$('.filechange').html(tmpl1);$('.filechange').show();}
function showReduced(newval,oldval)
{var changed=(100-Number((newval*100)/oldval)).toFixed(1);if(changed!=="0.0"){changed=(changed>0)?"<span class=green>-"+changed+"%</span>":"<span class=red>+"+changed.replace(/-/,'')+"%</span>";}else{changed="";}
return changed;}
function showImage(resp,tool)
{var tool=typeof tool!=='undefined'?tool:'';var nwidth,nheight,nstyle,nborder,dheight,dmarg,cropurl;var max_width=720;nwidth=parseInt(resp.width);nheight=parseInt(resp.height);dheight=nheight;if(resp.width>max_width){dmarg='margin-bottom:5px!important;';nstyle='position:absolute;';nborder='border:10px solid white;border-left:none!important;margin:-10px 0 10px 0!important;background-color:white;';}else{if(tool!=="add-text"){dheight+=4;}
nstyle='';nborder='';dmarg='';}
if(animation_id){var respID=resp.id;if(respID.match(/\-/)){cropurl="//gifimgs.com/res/"+resp.fullname;}else{cropurl="//gifimgs.com/animations/"+resp.fullname;}}else{cropurl="//gifimgs.com/tmp/"+resp.url;}
var arrayOfTools=["optimizer","reverser","rotate"];if($.inArray(tool,arrayOfTools)!=-1&&resp.width>720){var nratio=parseFloat(nwidth/720);nwidth='720';nheight=dheight=parseInt(nheight/nratio);}
var croparea='<div style="width:720px;height:'+dheight+'px;overflow:auto;'+dmarg+'">'+
'<div style="width:'+nwidth+'px;height:'+dheight+'px;'+nstyle+nborder+'" id="drag-container">'+
'<img id="jcrop-target" class="trg" src="'+cropurl+'" '+
'style="width:'+nwidth+'px;height:'+nheight+'px;'+nstyle+';overflow:hidden!important;" alt="" border="0" />'+
'</div></div>';if(tool==="add-text"){$('#croparea').css('position','relative');}
$('#croparea').html(croparea).show();if(tool==="crop"){enableJcrop(resp.width,resp.height);}}
function enableJcrop(w,h)
{$('#jcrop-target').Jcrop({onChange:showCoords,onSelect:showCoords,bgColor:'white'},function(){jcrop_api=this;});$('.settings-inp').keyup(function(e){if(e.keyCode===37||e.keyCode===39){return;}
if(e.keyCode!==13){return;}
recalculateCoords(jcrop_api);});$('#set').click(function(e){recalculateCoords(jcrop_api);});$('.settings-inp').blur(function(e){recalculateCoords(jcrop_api);});}
function recalculateCoords(jc_api)
{var r_x1=Math.floor($('#x').val());var r_y1=Math.floor($('#y').val());var r_x2=r_x1+Math.floor($('#w').val());var r_y2=r_y1+Math.floor($('#h').val());jc_api.setSelect([r_x1,r_y1,r_x2,r_y2]);return false;}
function showCoords(c)
{$('#x').val(Math.round(c.x));$('#y').val(Math.floor(c.y));$('#w').val(Math.floor(c.w));$('#h').val(Math.floor(c.h));}
function addTextInit(){$('.str-font').ddslick({width:100,height:300,background:"white"});$('select[id^="str-fontcolor-"]').colpick({layout:'hex',color:'ffffff',onSubmit:function(hsb,hex,rgb,el){$('#current-fontcolor').val(hex);$(el).css('background-color','#'+hex);$(el).colpickHide();}});$('select[id^="str-bordercolor-"]').colpick({layout:'hex',color:'000000',onSubmit:function(hsb,hex,rgb,el){$('#current-bordercolor').val(hex);$(el).css('background-color','#'+hex);$(el).colpickHide();}});$('#str-text-1').focus();}
$(document).keydown(function(e){if(e.which==37&&e.ctrlKey){link=$('[rel=prev]').attr('href');if(link){document.location.href=link;}
else return false;}
if(e.which==39&&e.ctrlKey){link=$('[rel=next]').attr('href');if(link){document.location.href=link;}
else return false;}});$(document).ready(function(){$('.share').blur(function(){this.deselect();});$('.share').click(function(){this.focus();this.select();});$('[id^="backgr"]').hover(function(){$('#animation_item').css('background-color','#'+$(this).attr('rel'));},function(){$('#animation_item').css('background-color','#fff');});$('#rotate').change(function(){if(this.checked){$('#rotate-value').focus();}});$('#dimensions-addtext').on('focus mousedown','.color',function(e){e.preventDefault();if(!$.browser.webkit&&!$.browser.msie){this.blur();window.focus();}});$('#dimensions-addtext').on('click','.str-align',function(){$('#select-align').show();});$(document).on('mouseover','img.frame-item',function(){$(this).css('border','1px dotted black');});$(document).on('mouseout','img.frame-item',function(){$(this).css('border','1px solid transparent');});$(document).on('change','#optimization',function(){var optiVal=$('#optimization').val();if(optiVal=="jpg-custom"){$('#custom-jpeg-quality').show();$('#custom-quality').focus();}else if(optiVal=="jpg"){$('#custom-jpeg-quality').hide();$('#custom-quality').val('');}});$(document).on('click','.imgur',function(e){e.preventDefault();var href=$(this).attr('href');$('#imgur-response').show();$.ajax({type:"POST",url:"/ajax/imgur.php?fn="+href,cache:false}).done(function(htmlData){$('#imgur-response').html(htmlData);});});});Array.prototype.remove=function(){var what,a=arguments,L=a.length,ax;while(L&&this.length){what=a[--L];while((ax=this.indexOf(what))!==-1){this.splice(ax,1);}}
return this;};("function"==typeof define&&define.amd?define:function(e,t){return t()})([],function(){!function(e,t,n){function r(){}function o(e,t){if(t)return"'"+e.split("'").join("\\'").split('\\"').join('\\\\\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t")+"'";var n=e.charAt(0),r=e.substring(1);return"="===n?"+("+r+")+":":"===n?"+e("+r+")+":";"+e+";o+="}function i(e,t,n){return e+="",t=t||2,n=t-e.length,n?F[t].substring(0,n)+e:e}function a(t){var n,r,o,i,a,s,u,l,c,d,f,p,m,h=mt.browser,g="rtl"==t.css("direction");return t.parent().hasClass("k-animation-container")?(p=t.parent(".k-animation-container"),m=p[0].style,p.is(":hidden")&&p.show(),n=ht.test(m.width)||ht.test(m.height),n||p.css({width:t.outerWidth(),height:t.outerHeight()})):(r=t.css(it.support.transitions.css+"box-shadow")||t.css("box-shadow"),o=r?r.match(yt)||[0,0,0,0,0]:[0,0,0,0,0],i=ft.max(+o[3],+(o[4]||0)),a=-o[1]+i,s=+o[1]+i,u=+o[2]+i,l=t[0].style.width,c=t[0].style.height,d=ht.test(l),f=ht.test(c),h.opera&&(a=s=u=5),n=d||f,d||(l=t.outerWidth()),f||(c=t.outerHeight()),t.wrap(e("<div/>").addClass("k-animation-container").css({width:l,height:c,marginLeft:a*(g?1:-1),paddingLeft:a,paddingRight:s,paddingBottom:u})),n&&t.css({width:"100%",height:"100%",boxSizing:"border-box",mozBoxSizing:"border-box",webkitBoxSizing:"border-box"})),h.msie&&ft.floor(h.version)<=7&&(t.css({zoom:1}),t.children(".k-menu").width(t.width())),t.parent()}function s(e){var t=1,n=arguments.length;for(t=1;n>t;t++)u(e,arguments[t]);return e}function u(e,t){var n,r,o,i,a=it.data.ObservableArray,s=it.data.DataSource;for(n in t)r=t[n],o=typeof r,o===St&&null!==r&&r.constructor!==Array&&r.constructor!==a&&r.constructor!==s?r instanceof Date?e[n]=new Date(r.getTime()):(i=e[n],e[n]=typeof i===St?i||{}:{},u(e[n],r)):o!==Ot&&(e[n]=r);return e}function l(e,t,r){for(var o in t)if(t.hasOwnProperty(o)&&t[o].test(e))return o;return r!==n?r:e}function c(t,n){var r,o={};return document.defaultView&&document.defaultView.getComputedStyle?(r=document.defaultView.getComputedStyle(t,""),n&&e.each(n,function(e,t){o[t]=r.getPropertyValue(t)})):(r=t.currentStyle,n&&e.each(n,function(e,t){o[t]=r[t.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()})]})),it.size(o)||(o=r),o}function d(e){var t,n=0;for(t in e)e.hasOwnProperty(t)&&"toJSON"!=t&&n++;return n}function f(e,t,n){var r,o,i,a;return t||(t="offset"),r=e[t](),o=mt.mobileOS,mt.touch&&o.ios&&o.flatVersion<410&&(i="offset"==t?r:e.offset(),a=r.left==i.left&&r.top==i.top)?{top:r.top-window.scrollY,left:r.left-window.scrollX}:(it.support.pointers&&!n&&(r.top-=window.pageYOffset-document.documentElement.scrollTop,r.left-=window.pageXOffset-document.documentElement.scrollLeft),r)}function p(e){var t={};return st("string"==typeof e?e.split(" "):e,function(e){t[e]=this}),t}function m(e){return new it.effects.Element(e)}function h(e,t,n,r){return typeof e===bt&&(dt(t)&&(r=t,t=400,n=!1),dt(n)&&(r=n,n=!1),typeof t===xt&&(n=t,t=400),e={effects:e,duration:t,reverse:n,complete:r}),at({effects:{},duration:400,reverse:!1,init:ct,teardown:ct,hide:!1},e,{completeCallback:e.complete,complete:ct})}function g(t,n,r,o,i){for(var a,s=0,u=t.length;u>s;s++)a=e(t[s]),a.queue(function(){I.promise(a,h(n,r,o,i))});return t}function y(e,t,n,r,o,i){return I.transitionPromise(e,t,h(n,r,o,i))}function v(e,t,n,r){return t&&(t=t.split(" "),st(t,function(t,n){e.toggleClass(n,r)})),e}function w(e){return(""+e).replace(W,"&amp;").replace(L,"&lt;").replace(U,"&gt;")}function b(e,r){var o;return 0===r.indexOf("data")&&(r=r.substring(4),r=r.charAt(0).toLowerCase()+r.substring(1)),r=r.replace(G,"-$1"),o=e.getAttribute("data-"+it.ns+r),null===o?o=n:"null"===o?o=null:"true"===o?o=!0:"false"===o?o=!1:vt.test(o)?o=parseFloat(o):B.test(o)&&!V.test(o)&&(o=t("("+o+")")),o}function M(t,r){var o,i,a={};for(o in r)i=b(t,o),i!==n&&(Y.test(o)&&(i=it.template(e("#"+i).html())),a[o]=i);return a}function S(e,t){var n=e.nodeName.toLowerCase();return(/input|select|textarea|button|object/.test(n)?!e.disabled:"a"===n?e.href||t:t)&&T(e)}function T(t){return!e(t).parents().andSelf().filter(function(){return"hidden"===e.css(this,"visibility")||e.expr.filters.hidden(this)}).length}function x(e,t){return new x.fn.init(e,t)}var O,D,k,C,z,H,E,A,N,P,F,_,I,W,L,U,j,R,J,$,Y,B,V,G,K,Q,q,X,Z,et,tt,nt,rt,ot,it=window.kendo=window.kendo||{},at=e.extend,st=e.each,ut=e.proxy,lt=e.isArray,ct=e.noop,dt=e.isFunction,ft=Math,pt=window.JSON||{},mt={},ht=/%/,gt=/\{(\d+)(:[^\}]+)?\}/g,yt=/(\d+?)px\s*(\d+?)px\s*(\d+?)px\s*(\d+?)?/i,vt=/^(\+|-?)\d+(\.?)\d*$/,wt="function",bt="string",Mt="number",St="object",Tt="null",xt="boolean",Ot="undefined",Dt={},kt={},Ct=[].slice,zt=window.Globalize;it.version="2013.2.716",r.extend=function(e){var t,n,r=function(){},o=this,i=e&&e.init?e.init:function(){o.apply(this,arguments)};r.prototype=o.prototype,n=i.fn=i.prototype=new r;for(t in e)n[t]=typeof e[t]!==St||e[t]instanceof Array||null===e[t]?e[t]:at(!0,{},r.prototype[t],e[t]);return n.constructor=i,i.extend=o.extend,i},D=function(){this._defaultPrevented=!0},k=function(){return this._defaultPrevented===!0},C=r.extend({init:function(){this._events={}},bind:function(e,t,r){var o,i,a,s,u,l=this,c=typeof e===bt?[e]:e,d=typeof t===wt;if(t===n){for(o in e)l.bind(o,e[o]);return l}for(o=0,i=c.length;i>o;o++)e=c[o],s=d?t:t[e],s&&(r&&(a=s,s=function(){l.unbind(e,s),a.apply(l,arguments)}),u=l._events[e]=l._events[e]||[],u.push(s));return l},one:function(e,t){return this.bind(e,t,!0)},first:function(e,t){var n,r,o,i,a=this,s=typeof e===bt?[e]:e,u=typeof t===wt;for(n=0,r=s.length;r>n;n++)e=s[n],o=u?t:t[e],o&&(i=a._events[e]=a._events[e]||[],i.unshift(o));return a},trigger:function(e,t){var n,r,o=this,i=o._events[e];if(i){for(t=t||{},t.sender=o,t._defaultPrevented=!1,t.preventDefault=D,t.isDefaultPrevented=k,i=i.slice(),n=0,r=i.length;r>n;n++)i[n].call(o,t);return t._defaultPrevented===!0}return!1},unbind:function(e,t){var r,o=this,i=o._events[e];if(e===n)o._events={};else if(i)if(t)for(r=i.length-1;r>=0;r--)i[r]===t&&i.splice(r,1);else o._events[e]=[];return o}}),z=/^\w+/,H=/\$\{([^}]*)\}/g,E=/\\\}/g,A=/__CURLY__/g,N=/\\#/g,P=/__SHARP__/g,F=["","0","00","000","0000"],O={paramName:"data",useWithBlock:!0,render:function(e,t){var n,r,o="";for(n=0,r=t.length;r>n;n++)o+=e(t[n]);return o},compile:function(t,n){var r,i,a,s=at({},this,n),u=s.paramName,l=u.match(z)[0],c=s.useWithBlock,d="var o,e=kendo.htmlEncode;";if(dt(t))return 2===t.length?function(n){return t(e,{data:n}).join("")}:t;for(d+=c?"with("+u+"){":"",d+="o=",i=t.replace(E,"__CURLY__").replace(H,"#=e($1)#").replace(A,"}").replace(N,"__SHARP__").split("#"),a=0;a<i.length;a++)d+=o(i[a],0===a%2);d+=c?";}":";",d+="return o;",d=d.replace(P,"#");try{return r=Function(l,d),r._slotCount=Math.floor(i.length/2),r}catch(f){throw Error(it.format("Invalid template:'{0}' Generated code:'{1}'",t,d))}}},function(){function e(e){return a.lastIndex=0,a.test(e)?'"'+e.replace(a,function(e){var t=s[e];return typeof t===bt?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function t(i,a){var s,l,c,d,f,p,m=n,h=a[i];if(h&&typeof h===St&&typeof h.toJSON===wt&&(h=h.toJSON(i)),typeof o===wt&&(h=o.call(a,i,h)),p=typeof h,p===bt)return e(h);if(p===Mt)return isFinite(h)?h+"":Tt;if(p===xt||p===Tt)return h+"";if(p===St){if(!h)return Tt;if(n+=r,f=[],"[object Array]"===u.apply(h)){for(d=h.length,s=0;d>s;s++)f[s]=t(s,h)||Tt;return c=0===f.length?"[]":n?"[\n"+n+f.join(",\n"+n)+"\n"+m+"]":"["+f.join(",")+"]",n=m,c}if(o&&typeof o===St)for(d=o.length,s=0;d>s;s++)typeof o[s]===bt&&(l=o[s],c=t(l,h),c&&f.push(e(l)+(n?": ":":")+c));else for(l in h)Object.hasOwnProperty.call(h,l)&&(c=t(l,h),c&&f.push(e(l)+(n?": ":":")+c));return c=0===f.length?"{}":n?"{\n"+n+f.join(",\n"+n)+"\n"+m+"}":"{"+f.join(",")+"}",n=m,c}}var n,r,o,a=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,s={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},u={}.toString;typeof Date.prototype.toJSON!==wt&&(Date.prototype.toJSON=function(){var e=this;return isFinite(e.valueOf())?i(e.getUTCFullYear(),4)+"-"+i(e.getUTCMonth()+1)+"-"+i(e.getUTCDate())+"T"+i(e.getUTCHours())+":"+i(e.getUTCMinutes())+":"+i(e.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}),typeof pt.stringify!==wt&&(pt.stringify=function(e,i,a){var s;if(n="",r="",typeof a===Mt)for(s=0;a>s;s+=1)r+=" ";else typeof a===bt&&(r=a);if(o=i,i&&typeof i!==wt&&(typeof i!==St||typeof i.length!==Mt))throw Error("JSON.stringify");return t("",{"":e})})}(),function(){function e(e){if(e){if(e.numberFormat)return e;if(typeof e===bt){var t=it.cultures;return t[e]||t[e.split("-")[0]]||null}return null}return null}function t(t){return t&&(t=e(t)),t||it.cultures.current}function r(e){e.groupSizes=e.groupSize,e.percent.groupSizes=e.percent.groupSize,e.currency.groupSizes=e.currency.groupSize}function o(e,r,o){o=t(o);var a=o.calendars.standard,s=a.days,u=a.months;return r=a.patterns[r]||r,r.replace(l,function(t){var r;return"d"===t?r=e.getDate():"dd"===t?r=i(e.getDate()):"ddd"===t?r=s.namesAbbr[e.getDay()]:"dddd"===t?r=s.names[e.getDay()]:"M"===t?r=e.getMonth()+1:"MM"===t?r=i(e.getMonth()+1):"MMM"===t?r=u.namesAbbr[e.getMonth()]:"MMMM"===t?r=u.names[e.getMonth()]:"yy"===t?r=i(e.getFullYear()%100):"yyyy"===t?r=i(e.getFullYear(),4):"h"===t?r=e.getHours()%12||12:"hh"===t?r=i(e.getHours()%12||12):"H"===t?r=e.getHours():"HH"===t?r=i(e.getHours()):"m"===t?r=e.getMinutes():"mm"===t?r=i(e.getMinutes()):"s"===t?r=e.getSeconds():"ss"===t?r=i(e.getSeconds()):"f"===t?r=ft.floor(e.getMilliseconds()/100):"ff"===t?r=ft.floor(e.getMilliseconds()/10):"fff"===t?r=e.getMilliseconds():"tt"===t&&(r=e.getHours()<12?a.AM[0]:a.PM[0]),r!==n?r:t.slice(1,t.length-1)})}function a(e,r,o){o=t(o);var i,a,u,l,w,b,M,S,T,x,O,D,k,C,z,H,E,A,N,P,F,_,I,W=o.numberFormat,L=W.groupSize[0],U=W[h],j=W[m],R=W.decimals,J=W.pattern[0],$=[],Y=0>e,B=p,V=p,G=-1;if(e===n)return p;if(!isFinite(e))return e;if(!r)return o.name.length?e.toLocaleString():""+e;if(w=c.exec(r)){if(r=w[1].toLowerCase(),a="c"===r,u="p"===r,(a||u)&&(W=a?W.currency:W.percent,L=W.groupSize[0],U=W[h],j=W[m],R=W.decimals,i=W.symbol,J=W.pattern[Y?0:1]),l=w[2],l&&(R=+l),"e"===r)return l?e.toExponential(R):e.toExponential();if(u&&(e*=100),e=s(e,R),e=e.split(m),b=e[0],M=e[1],Y&&(b=b.substring(1)),V=b,S=b.length,S>=L)for(V=p,x=0;S>x;x++)x>0&&0===(S-x)%L&&(V+=U),V+=b.charAt(x);if(M&&(V+=j+M),"n"===r&&!Y)return V;for(e=p,x=0,O=J.length;O>x;x++)D=J.charAt(x),e+="n"===D?V:"$"===D||"%"===D?i:D;return e}if(Y&&(e=-e),(r.indexOf("'")>-1||r.indexOf('"')>-1||r.indexOf("\\")>-1)&&(r=r.replace(d,function(e){var t=e.charAt(0).replace("\\",""),n=e.slice(1).replace(t,"");return $.push(n),v})),r=r.split(";"),Y&&r[1])r=r[1],C=!0;else if(0===e){if(r=r[2]||r[0],-1==r.indexOf(g)&&-1==r.indexOf(y))return r}else r=r[0];if(P=r.indexOf("%"),F=r.indexOf("$"),u=-1!=P,a=-1!=F,u&&(e*=100),a&&"\\"===r[F-1]&&(r=r.split("\\").join(""),a=!1),(a||u)&&(W=a?W.currency:W.percent,L=W.groupSize[0],U=W[h],j=W[m],R=W.decimals,i=W.symbol),k=r.indexOf(h)>-1,k&&(r=r.replace(f,p)),z=r.indexOf(m),O=r.length,-1!=z?(M=(""+e).split("e"),M=M[1]?s(e,Math.abs(M[1])):M[0],M=M.split(m)[1]||p,E=r.lastIndexOf(y)-z,H=r.lastIndexOf(g)-z,A=E>-1,N=H>-1,x=M.length,A||N||(r=r.substring(0,z)+r.substring(z+1),O=r.length,z=-1,x=0),A&&E>H?x=E:H>E&&(N&&x>H?x=H:A&&E>x&&(x=E)),x>-1&&(e=s(e,x))):e=s(e),H=r.indexOf(g),_=E=r.indexOf(y),G=-1==H&&-1!=E?E:-1!=H&&-1==E?H:H>E?E:H,H=r.lastIndexOf(g),E=r.lastIndexOf(y),I=-1==H&&-1!=E?E:-1!=H&&-1==E?H:H>E?H:E,G==O&&(I=G),-1!=G){if(V=(""+e).split(m),b=V[0],M=V[1]||p,S=b.length,T=M.length,k)if(S===L&&z-_>S)b=U+b;else if(S>L){for(V=p,x=0;S>x;x++)x>0&&0===(S-x)%L&&(V+=U),V+=b.charAt(x);b=V}for(e=r.substring(0,G),Y&&!C&&(e+="-"),x=G;O>x;x++){if(D=r.charAt(x),-1==z){if(S>I-x){e+=b;break}}else if(-1!=E&&x>E&&(B=p),S>=z-x&&z-x>-1&&(e+=b,x=z),z===x){e+=(M?j:p)+M,x+=I-z+1;continue}D===y?(e+=D,B=D):D===g&&(e+=B)}if(I>=G&&(e+=r.substring(I+1)),a||u){for(V=p,x=0,O=e.length;O>x;x++)D=e.charAt(x),V+="$"===D||"%"===D?i:D;e=V}if(O=$.length)for(x=0;O>x;x++)e=e.replace(v,$[x])}return e}var s,u,l=/dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|HH|H|hh|h|mm|m|fff|ff|f|tt|ss|s|"[^"]*"|'[^']*'/g,c=/^(n|c|p|e)(\d*)$/i,d=/(\\.)|(['][^']*[']?)|(["][^"]*["]?)/g,f=/\,/g,p="",m=".",h=",",g="#",y="0",v="??",w="en-US",b={}.toString;it.cultures={"en-US":{name:w,numberFormat:{pattern:["-n"],decimals:2,",":",",".":".",groupSize:[3],percent:{pattern:["-n %","n %"],decimals:2,",":",",".":".",groupSize:[3],symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,",":",",".":".",groupSize:[3],symbol:"$"}},calendars:{standard:{days:{names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],namesAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],namesShort:["Su","Mo","Tu","We","Th","Fr","Sa"]},months:{names:["January","February","March","April","May","June","July","August","September","October","November","December"],namesAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},AM:["AM","am","AM"],PM:["PM","pm","PM"],patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",F:"dddd, MMMM dd, yyyy h:mm:ss tt",g:"M/d/yyyy h:mm tt",G:"M/d/yyyy h:mm:ss tt",m:"MMMM dd",M:"MMMM dd",s:"yyyy'-'MM'-'ddTHH':'mm':'ss",t:"h:mm tt",T:"h:mm:ss tt",u:"yyyy'-'MM'-'dd HH':'mm':'ss'Z'",y:"MMMM, yyyy",Y:"MMMM, yyyy"},"/":"/",":":":",firstDay:0,twoDigitYearMax:2029}}}},it.culture=function(t){var o,i=it.cultures;return t===n?i.current:(o=e(t)||i[w],o.calendar=o.calendars.standard,i.current=o,zt&&r(o.numberFormat),n)},it.findCulture=e,it.getCulture=t,it.culture(w),s=function(e,t){var n=Math.pow(10,t||0);return(Math.round(e*n)/n).toFixed(t)},u=function(e,t,r){if(t){if("[object Date]"===b.call(e))return o(e,t,r);if(typeof e===Mt)return a(e,t,r)}return e!==n?e:""},zt&&(u=ut(zt.format,zt)),it.format=function(e){var t=arguments;return e.replace(gt,function(e,n,r){var o=t[parseInt(n,10)+1];return u(o,r?r.substring(1):"")})},it._extractFormat=function(e){return"{0:"===e.slice(0,3)&&(e=e.slice(3,e.length-1)),e},it._activeElement=function(){try{return document.activeElement}catch(e){return document.documentElement.activeElement}},it._round=s,it.toString=u}(),function(){function t(e,t,n){return!(e>=t&&n>=e)}function r(e){return e.charAt(0)}function o(t){return e.map(t,r)}function i(e,t){t||23!==e.getHours()||e.setHours(e.getHours()+2)}function a(e){for(var t=0,n=e.length,r=[];n>t;t++)r[t]=(e[t]+"").toLowerCase();return r}function s(e){var t,n={};for(t in e)n[t]=a(e[t]);return n}function u(e,r,a){if(!e)return null;var u,l,c,p,m,g,y,v,w,b,M,S,T=function(e){for(var t=0;r[F]===e;)t++,F++;return t>0&&(F-=1),t},x=function(t){var n=h[t]||RegExp("^\\d{1,"+t+"}"),r=e.substr(_,t).match(n);return r?(r=r[0],_+=r.length,parseInt(r,10)):null},O=function(t,n){for(var r,o,i,a=0,s=t.length;s>a;a++)if(r=t[a],o=r.length,i=e.substr(_,o),n&&(i=i.toLowerCase()),i==r)return _+=o,a+1;return null},D=function(){var t=!1;return e.charAt(_)===r[F]&&(_++,t=!0),t},k=a.calendars.standard,C=null,z=null,H=null,E=null,A=null,N=null,P=null,F=0,_=0,I=!1,W=new Date,L=k.twoDigitYearMax||2029,U=W.getFullYear();for(r||(r="d"),p=k.patterns[r],p&&(r=p),r=r.split(""),c=r.length;c>F;F++)if(u=r[F],I)"'"===u?I=!1:D();else if("d"===u){if(l=T("d"),k._lowerDays||(k._lowerDays=s(k.days)),H=3>l?x(2):O(k._lowerDays[3==l?"namesAbbr":"names"],!0),null===H||t(H,1,31))return null}else if("M"===u){if(l=T("M"),k._lowerMonths||(k._lowerMonths=s(k.months)),z=3>l?x(2):O(k._lowerMonths[3==l?"namesAbbr":"names"],!0),null===z||t(z,1,12))return null;z-=1}else if("y"===u){if(l=T("y"),C=x(l),null===C)return null;2==l&&("string"==typeof L&&(L=U+parseInt(L,10)),C=U-U%100+C,C>L&&(C-=100))}else if("h"===u){if(T("h"),E=x(2),12==E&&(E=0),null===E||t(E,0,11))return null}else if("H"===u){if(T("H"),E=x(2),null===E||t(E,0,23))return null}else if("m"===u){if(T("m"),A=x(2),null===A||t(A,0,59))return null}else if("s"===u){if(T("s"),N=x(2),null===N||t(N,0,59))return null}else if("f"===u){if(l=T("f"),P=x(l),null!==P&&l>3&&(P=parseInt((""+P).substring(0,3),10)),null===P||t(P,0,999))return null}else if("t"===u){if(l=T("t"),w=k.AM,b=k.PM,1===l&&(w=o(w),b=o(b)),m=O(b),!m&&!O(w))return null}else if("z"===u){if(g=!0,l=T("z"),"Z"===e.substr(_,1)){if(!y)return null;D();continue}if(v=e.substr(_,6).match(l>2?f:d),!v)return null;if(v=v[0],_=v.length,v=v.split(":"),M=parseInt(v[0],10),t(M,-12,13))return null;if(l>2&&(S=parseInt(v[1],10),isNaN(S)||t(S,0,59)))return null}else if("T"===u)y=D();else if("'"===u)I=!0,D();else if(!D())return null;return null===C&&(C=U),m&&12>E&&(E+=12),null===H&&(H=1),g?(M&&(E+=-M),S&&(A+=-S),e=new Date(Date.UTC(C,z,H,E,A,N,P))):(e=new Date(C,z,H,E,A,N,P),i(e,E)),100>C&&e.setFullYear(C),e.getDate()!==H&&g===n?null:e}var l=/\u00A0/g,c=/[eE][\-+]?[0-9]+/,d=/[+|\-]\d{1,2}/,f=/[+|\-]\d{1,2}:\d{2}/,p=/^\/Date\((.*?)\)\/$/,m=["G","g","d","F","D","y","m","T","t"],h={2:/^\d{1,2}/,4:/^\d{4}/},g={}.toString;it.parseDate=function(e,t,n){if("[object Date]"===g.call(e))return e;var r,o,i=0,a=null;if(e&&0===e.indexOf("/D")&&(a=p.exec(e)))return new Date(parseInt(a[1],10));if(n=it.getCulture(n),!t){for(t=[],o=n.calendar.patterns,r=m.length;r>i;i++)t[i]=o[m[i]];i=0,t.push("yyyy/MM/dd HH:mm:ss","yyyy/MM/dd HH:mm","yyyy/MM/dd","ddd MMM dd yyyy HH:mm:ss","yyyy-MM-ddTHH:mm:ss.fffffffzzz","yyyy-MM-ddTHH:mm:ss.fffzzz","yyyy-MM-ddTHH:mm:sszzz","yyyy-MM-ddTHH:mmzzz","yyyy-MM-ddTHH:mmzz","yyyy-MM-ddTHH:mm:ss","yyyy-MM-ddTHH:mm","yyyy-MM-dd HH:mm:ss","yyyy-MM-dd HH:mm","yyyy-MM-dd")}for(t=lt(t)?t:[t],r=t.length;r>i;i++)if(a=u(e,t[i],n))return a;return a},it.parseInt=function(e,t){var n=it.parseFloat(e,t);return n&&(n=0|n),n},it.parseFloat=function(e,t,n){if(!e&&0!==e)return null;if(typeof e===Mt)return e;e=""+e,t=it.getCulture(t);var r,o,i=t.numberFormat,a=i.percent,s=i.currency,u=s.symbol,d=a.symbol,f=e.indexOf("-");return c.test(e)?(e=parseFloat(e),isNaN(e)&&(e=null),e):f>0?null:(f=f>-1,e.indexOf(u)>-1||n&&n.toLowerCase().indexOf("c")>-1?(i=s,r=i.pattern[0].replace("$",u).split("n"),e.indexOf(r[0])>-1&&e.indexOf(r[1])>-1&&(e=e.replace(r[0],"").replace(r[1],""),f=!0)):e.indexOf(d)>-1&&(o=!0,i=a,u=d),e=e.replace("-","").replace(u,"").replace(l," ").split(i[","].replace(l," ")).join("").replace(i["."],"."),e=parseFloat(e),isNaN(e)?e=null:f&&(e*=-1),e&&o&&(e/=100),e)},zt&&(it.parseDate=function(e,t,n){return"[object Date]"===g.call(e)?e:zt.parseDate(e,t,n)},it.parseFloat=function(e,t){return typeof e===Mt?e:e===n||null===e?null:(e=zt.parseFloat(e,t),isNaN(e)?null:e)})}(),function(){function t(e){var t,n=!1,r=[],o={webkit:/(chrome)[ \/]([\w.]+)/i,safari:/(webkit)[ \/]([\w.]+)/i,opera:/(opera)(?:.*version|)[ \/]([\w.]+)/i,msie:/(msie) ([\w.]+)/i,mozilla:/(mozilla)(?:.*? rv:([\w.]+)|)/i};for(t in o)if(o.hasOwnProperty(t)&&(r=e.match(o[t]))){n={},n[t]=!0,n[r[1].toLowerCase()]=!0,n.version=parseInt(document.documentMode||r[2],10);break}return n}var r,o,i,a,s,u;mt.scrollbar=function(){var e,t=document.createElement("div");return t.style.cssText="overflow:scroll;overflow-x:hidden;zoom:1;clear:both",t.innerHTML="&nbsp;",document.body.appendChild(t),e=t.offsetWidth-t.scrollWidth,document.body.removeChild(t),e},mt.isRtl=function(t){return e(t).closest(".k-rtl").length>0},r=document.createElement("table");try{r.innerHTML="<tr><td></td></tr>",mt.tbodyInnerHtml=!0}catch(c){mt.tbodyInnerHtml=!1}mt.touch="ontouchstart"in window,mt.pointers=navigator.msPointerEnabled,o=mt.transitions=!1,i=mt.transforms=!1,a="HTMLElement"in window?HTMLElement.prototype:[],mt.hasHW3D="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix||"MozPerspective"in document.documentElement.style||"msPerspective"in document.documentElement.style,st(["Moz","webkit","O","ms"],function(){var e,t=""+this,a=typeof r.style[t+"Transition"]===bt;return a||typeof r.style[t+"Transform"]===bt?(e=t.toLowerCase(),i={css:"ms"!=e?"-"+e+"-":"",prefix:t,event:"o"===e||"webkit"===e?e:""},a&&(o=i,o.event=o.event?o.event+"TransitionEnd":"transitionend"),!1):n}),mt.transforms=i,mt.transitions=o,mt.devicePixelRatio=window.devicePixelRatio===n?1:window.devicePixelRatio;try{mt.screenWidth=window.outerWidth||window.screen?window.screen.availWidth:window.innerWidth,mt.screenHeight=window.outerHeight||window.screen?window.screen.availHeight:window.innerHeight,mt.zoomLevel=function(){return mt.touch?document.documentElement.clientWidth/window.innerWidth:mt.pointers?(top||window).outerWidth/(top||window).innerWidth:1}}catch(c){mt.screenWidth=window.screen.availWidth,mt.screenHeight=window.screen.availHeight,mt.zoomLevel=function(){return 1}}mt.detectOS=function(e){var t,n,r=!1,o=[],i=!/mobile safari/i.test(e),a={fire:/(Silk)\/(\d+)\.(\d+(\.\d+)?)/,android:/(Android|Android.*(?:Opera|Firefox).*?\/)\s*(\d+)\.(\d+(\.\d+)?)/,iphone:/(iPhone|iPod).*OS\s+(\d+)[\._]([\d\._]+)/,ipad:/(iPad).*OS\s+(\d+)[\._]([\d_]+)/,meego:/(MeeGo).+NokiaBrowser\/(\d+)\.([\d\._]+)/,webos:/(webOS)\/(\d+)\.(\d+(\.\d+)?)/,blackberry:/(BlackBerry|BB10).*?Version\/(\d+)\.(\d+(\.\d+)?)/,playbook:/(PlayBook).*?Tablet\s*OS\s*(\d+)\.(\d+(\.\d+)?)/,wp:/(Windows Phone(?: OS)?)\s(\d+)\.(\d+(\.\d+)?)/,windows:/(MSIE)\s+(\d+)\.(\d+(\.\d+)?)/,ffos:/(Mobile).*rv:(\d+)\.(\d+(\.\d+)?).*Firefox/},s={ios:/^i(phone|pad|pod)$/i,android:/^android|fire$/i,blackberry:/^blackberry|playbook/i,windows:/windows/,wp:/wp/,meego:/meego|ffos/},u={tablet:/playbook|ipad|fire/i},c={omini:/Opera\sMini/i,omobile:/Opera\sMobi/i,firefox:/Firefox|Fennec/i,mobilesafari:/version\/.*safari/i,chrome:/chrome/i,webkit:/webkit/i,ie:/MSIE|Windows\sPhone/i};for(n in a)if(a.hasOwnProperty(n)&&(o=e.match(a[n]))){if("windows"==n&&"plugins"in navigator)return!1;r={},r.device=n,r.tablet=l(n,u,!1),r.browser=l(e,c,"default"),r.name=l(n,s),r[r.name]=!0,r.majorVersion=o[2],r.minorVersion=o[3].replace("_","."),t=r.minorVersion.replace(".","").substr(0,2),r.flatVersion=r.majorVersion+t+Array(3-(t.length<3?t.length:2)).join("0"),r.appMode=window.navigator.standalone||/file|local|wmapp/.test(window.location.protocol)||typeof window.PhoneGap!==Ot||typeof window.cordova!==Ot,r.android&&(mt.devicePixelRatio<1.5&&r.flatVersion<400||i)&&(mt.screenWidth>800||mt.screenHeight>800)&&(r.tablet=n);break}return r},s=mt.mobileOS=mt.detectOS(navigator.userAgent),mt.wpDevicePixelRatio=s.wp?screen.width/320:0,mt.kineticScrollNeeded=s&&(mt.touch||mt.pointers),mt.hasNativeScrolling=!1,(s.ios&&s.majorVersion>4||s.android&&s.majorVersion>2||s.wp)&&(mt.hasNativeScrolling=s),mt.mouseAndTouchPresent=mt.touch&&!(mt.mobileOS.ios||mt.mobileOS.android),mt.browser=t(navigator.userAgent),mt.cssBorderSpacing=n!==document.documentElement.style.borderSpacing&&!(mt.browser.msie&&mt.browser.version<8),function(t){var n,r=parseInt(t.version,10);t.msie?n="ie":t.mozilla?n="ff":t.safari?n="safari":t.webkit?n="webkit":t.opera&&(n="opera"),n&&e(document.documentElement).addClass("k-"+n+" k-"+n+r)}(mt.browser),mt.eventCapture=document.documentElement.addEventListener,mt.placeholder="placeholder"in document.createElement("input"),mt.stableSort=function(){var e=[0,1,2,3,4,5,6,7,8,9,10,11,12].sort(function(){return 0});return 0===e[0]&&1===e[1]&&2===e[2]&&3===e[3]&&4===e[4]&&5===e[5]&&6===e[6]&&7===e[7]&&8===e[8]&&9===e[9]&&10===e[10]&&11===e[11]&&12===e[12]}(),mt.matchesSelector=a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.matchesSelector||function(t){for(var n=document.querySelectorAll?(this.parentNode||document).querySelectorAll(t)||[]:e(t),r=n.length;r--;)if(n[r]==this)return!0;return!1},mt.pushState=window.history&&window.history.pushState,u=document.documentMode,mt.hashChange="onhashchange"in window&&!(mt.browser.msie&&(!u||8>=u))}(),_={left:{reverse:"right"},right:{reverse:"left"},down:{reverse:"up"},up:{reverse:"down"},top:{reverse:"bottom"},bottom:{reverse:"top"},"in":{reverse:"out"},out:{reverse:"in"}},I={},e.extend(I,{Element:function(t){this.element=e(t)},promise:function(e,t){e.is(":visible")||e.css({display:e.data("olddisplay")||"block"}).css("display"),t.hide&&e.data("olddisplay",e.css("display")).hide(),t.init&&t.init(),t.completeCallback&&t.completeCallback(e),e.dequeue()},transitionPromise:function(e,t,n){var r=it.wrap(e);return r.append(t),e.hide(),t.show(),n.completeCallback&&n.completeCallback(e),e}}),"kendoAnimate"in e.fn||at(e.fn,{kendoStop:function(e,t){return this.stop(e,t)},kendoAnimate:function(e,t,n,r){return g(this,e,t,n,r)},kendoAnimateTo:function(e,t,n,r,o){return y(this,e,t,n,r,o)},kendoAddClass:function(e,t){return it.toggleClass(this,e,t,!0)},kendoRemoveClass:function(e,t){return it.toggleClass(this,e,t,!1)},kendoToggleClass:function(e,t,n){return it.toggleClass(this,e,t,n)}}),W=/&/g,L=/</g,U=/>/g,j=function(e){return e.target},mt.touch&&(j=function(e){var t="originalEvent"in e?e.originalEvent.changedTouches:"changedTouches"in e?e.changedTouches:null;return t?document.elementFromPoint(t[0].clientX,t[0].clientY):e.target},st(["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap"],function(t,n){e.fn[n]=function(e){return this.bind(n,e)}})),mt.touch?mt.mobileOS?(mt.mousedown="touchstart",mt.mouseup="touchend",mt.mousemove="touchmove",mt.mousecancel="touchcancel",mt.click="touchend",mt.resize="orientationchange"):(mt.mousedown="mousedown touchstart",mt.mouseup="mouseup touchend",mt.mousemove="mousemove touchmove",mt.mousecancel="mouseleave touchcancel",mt.click="click",mt.resize="resize"):mt.pointers?(mt.mousemove="MSPointerMove",mt.mousedown="MSPointerDown",mt.mouseup="MSPointerUp",mt.mousecancel="MSPointerCancel",mt.click="MSPointerUp",mt.resize="orientationchange resize"):(mt.mousemove="mousemove",mt.mousedown="mousedown",mt.mouseup="mouseup",mt.mousecancel="mouseleave",mt.click="click",mt.resize="resize"),R=function(e,t){var n,r,o,i,a=t||"d",s=1;for(r=0,o=e.length;o>r;r++)i=e[r],""!==i&&(n=i.indexOf("["),0!==n&&(-1==n?i="."+i:(s++,i="."+i.substring(0,n)+" || {})"+i.substring(n))),s++,a+=i+(o-1>r?" || {})":")"));return Array(s).join("(")+a},J=/^([a-z]+:)?\/\//i,at(it,{ui:it.ui||{},fx:it.fx||m,effects:it.effects||I,mobile:it.mobile||{},data:it.data||{},dataviz:it.dataviz||{ui:{roles:{}}},keys:{INSERT:45,DELETE:46,BACKSPACE:8,TAB:9,ENTER:13,ESC:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,END:35,HOME:36,SPACEBAR:32,PAGEUP:33,PAGEDOWN:34,F2:113,F10:121,F12:123},support:it.support||mt,animate:it.animate||g,ns:"",attr:function(e){return"data-"+it.ns+e},wrap:a,deepExtend:s,getComputedStyles:c,size:d,getOffset:it.getOffset||f,parseEffects:it.parseEffects||p,toggleClass:it.toggleClass||v,directions:it.directions||_,Observable:C,Class:r,Template:O,template:ut(O.compile,O),render:ut(O.render,O),stringify:ut(pt.stringify,pt),eventTarget:j,htmlEncode:w,isLocalUrl:function(e){return e&&!J.test(e)},expr:function(e,t,n){return e=e||"",typeof t==bt&&(n=t,t=!1),n=n||"d",e&&"["!==e.charAt(0)&&(e="."+e),e=t?R(e.split("."),n):n+e},getter:function(e,t){return Dt[e]=Dt[e]||Function("d","return "+it.expr(e,t))},setter:function(e){return kt[e]=kt[e]||Function("d,value",it.expr(e)+"=value")},accessor:function(e){return{get:it.getter(e),set:it.setter(e)}},guid:function(){var e,t,n="";for(e=0;32>e;e++)t=0|16*ft.random(),(8==e||12==e||16==e||20==e)&&(n+="-"),n+=(12==e?4:16==e?8|3&t:t).toString(16);return n},roleSelector:function(e){return e.replace(/(\S+)/g,"["+it.attr("role")+"=$1],").slice(0,-1)},triggeredByInput:function(e){return/^(label|input|textarea|select)$/i.test(e.target.tagName)},logToConsole:function(e){var t=window.console;n!==t&&t.log&&t.log(e)}}),$=C.extend({init:function(e,t){var n=this;n.element=it.jQuery(e).handler(n),C.fn.init.call(n),t=n.options=at(!0,{},n.options,t),n.element.attr(it.attr("role"))||n.element.attr(it.attr("role"),(t.name||"").toLowerCase()),n.element.data("kendo"+t.prefix+t.name,n),n.bind(n.events,t)},events:[],options:{prefix:""},_tabindex:function(e){e=e||this.wrapper;var t=this.element,n="tabindex",r=e.attr(n)||t.attr(n);t.removeAttr(n),e.attr(n,isNaN(r)?0:r)},setOptions:function(t){for(var n,r=this,o=0,i=r.events.length;i>o;o++)n=r.events[o],r.options[n]&&t[n]&&r.unbind(n,r.options[n]);e.extend(r.options,t),r.bind(r.events,t)},destroy:function(){var e=this;e.element.removeData("kendo"+e.options.prefix+e.options.name),e.element.removeData("handler"),e.unbind()}}),it.notify=ct,Y=/template$/i,B=/^\s*(?:\{(?:.|\r\n|\n)*\}|\[(?:.|\r\n|\n)*\])\s*$/,V=/^\{(\d+)(:[^\}]+)?\}/,G=/([A-Z])/g,it.initWidget=function(t,r,o){var i,a,s,u,l,c,d,f;if(o?o.roles&&(o=o.roles):o=it.ui.roles,t=t.nodeType?t:t[0],c=t.getAttribute("data-"+it.ns+"role"),c&&(s=-1===c.indexOf(".")?o[c]:it.getter(c)(window))){for(f=b(t,"dataSource"),r=e.extend({},M(t,s.fn.options),r),f&&(r.dataSource=typeof f===bt?it.getter(f)(window):f),u=0,l=s.fn.events.length;l>u;u++)a=s.fn.events[u],d=b(t,a),d!==n&&(r[a]=it.getter(d)(window));return i=e(t).data("kendo"+s.fn.options.prefix+s.fn.options.name),i?i.setOptions(r):i=new s(t,r),i}},it.rolesFromNamespaces=function(e){var t,n,r=[];for(e[0]||(e=[it.ui,it.dataviz.ui]),t=0,n=e.length;n>t;t++)r[t]=e[t].roles;return at.apply(null,[{}].concat(r.reverse()))},it.init=function(t){var n=it.rolesFromNamespaces(Ct.call(arguments,1));e(t).find("[data-"+it.ns+"role]").andSelf().each(function(){it.initWidget(this,{},n)})},it.destroy=function(t){e(t).find("[data-"+it.ns+"role]").andSelf().each(function(){var t=e(this),n=it.widgetInstance(t,it.ui)||it.widgetInstance(t,it.mobile.ui)||it.widgetInstance(t,it.dataviz.ui);n&&n.destroy()})},it.parseOptions=M,at(it.ui,{Widget:$,roles:{},progress:function(t,n){var r,o,i,a,s=t.find(".k-loading-mask"),u=it.support,l=u.browser;n?s.length||(r=u.isRtl(t),o=r?"right":"left",a=t.scrollLeft(),i=l.webkit?r?t[0].scrollWidth-t.width()-2*a:0:0,s=e("<div class='k-loading-mask'><span class='k-loading-text'>Loading...</span><div class='k-loading-image'/><div class='k-loading-color'/></div>").width("100%").height("100%").css("top",t.scrollTop()).css(o,Math.abs(a)+i).prependTo(t)):s&&s.remove()},plugin:function(t,r,o){var i,a=t.fn.options.name;r=r||it.ui,o=o||"",r[a]=t,r.roles[a.toLowerCase()]=t,i="getKendo"+o+a,a="kendo"+o+a,e.fn[a]=function(r){var o,i=this;return typeof r===bt?(o=Ct.call(arguments,1),this.each(function(){var t,s,u=e.data(this,a);if(!u)throw Error(it.format("Cannot call method '{0}' of {1} before it is initialized",r,a));if(t=u[r],typeof t!==wt)throw Error(it.format("Cannot find method '{0}' of {1}",r,a));return s=t.apply(u,o),s!==n?(i=s,!1):n})):this.each(function(){new t(this,r)}),i},e.fn[i]=function(){return this.data(a)}}}),K={bind:function(){return this}},Q=$.extend({init:function(e,t){$.fn.init.call(this,e,t),this.element.autoApplyNS(),this.wrapper=this.element},destroy:function(){$.fn.destroy.call(this),this.element.kendoDestroy()},options:{prefix:"Mobile"},events:[],view:function(){var e=this.element.closest(it.roleSelector("view splitview modalview drawer"));return it.widgetInstance(e,it.mobile.ui)},container:function(){var e=this.element.closest(it.roleSelector("view layout modalview drawer"));return it.widgetInstance(e,it.mobile.ui)||K}}),at(it.mobile,{init:function(e){it.init(e,it.mobile.ui,it.ui,it.dataviz.ui)},ui:{Widget:Q,roles:{},plugin:function(e){it.ui.plugin(e,it.mobile.ui,"Mobile")}}}),it.touchScroller=function(t,n){return e(t).map(function(t,r){return r=e(r),mt.kineticScrollNeeded&&it.mobile.ui.Scroller&&!r.data("kendoMobileScroller")?(r.kendoMobileScroller(n),r.data("kendoMobileScroller")):!1})[0]},it.preventDefault=function(e){e.preventDefault()},it.widgetInstance=function(e,t){var r=t.roles[e.data(it.ns+"role")];return r?e.data("kendo"+r.fn.options.prefix+r.fn.options.name):n},it.onResize=function(t){var n=t;return mt.mobileOS.android&&(n=function(){setTimeout(t,200)}),e(window).on(mt.resize,n),n},it.unbindResize=function(t){e(window).off(mt.resize,t)},it.attrValue=function(e,t){return e.data(it.ns+t)},it.days={Sunday:0,Monday:1,Tuesday:2,Wednesday:3,Thursday:4,Friday:5,Saturday:6},e.extend(e.expr[":"],{focusable:function(t){var n=e.attr(t,"tabindex");return S(t,!isNaN(n)&&n>-1)}}),q=["mousedown","mousemove","mouseenter","mouseleave","mouseover","mouseout","mouseup","click"],X="label, input, [data-rel=external]",Z={setupMouseMute:function(){var t,n=0,r=q.length,o=document.documentElement;if(!Z.mouseTrap&&mt.eventCapture)for(Z.mouseTrap=!0,Z.bustClick=!1,Z.captureMouse=!1,t=function(t){Z.captureMouse&&("click"===t.type?Z.bustClick&&!e(t.target).is(X)&&(t.preventDefault(),t.stopPropagation()):t.stopPropagation())};r>n;n++)o.addEventListener(q[n],t,!0)},muteMouse:function(e){Z.captureMouse=!0,e.data.bustClick&&(Z.bustClick=!0),clearTimeout(Z.mouseTrapTimeoutID)},unMuteMouse:function(){clearTimeout(Z.mouseTrapTimeoutID),Z.mouseTrapTimeoutID=setTimeout(function(){Z.captureMouse=!1,Z.bustClick=!1},400)}},et={down:"touchstart mousedown",move:"mousemove touchmove",up:"mouseup touchend touchcancel",cancel:"mouseleave touchcancel"},mt.touch&&(mt.mobileOS.ios||mt.mobileOS.android)&&(et={down:"touchstart",move:"touchmove",up:"touchend touchcancel",cancel:"touchcancel"}),mt.pointers&&(et={down:"MSPointerDown",move:"MSPointerMove",up:"MSPointerUp",cancel:"MSPointerCancel MSPointerLeave"},e.each({MSPointerEnter:"MSPointerOver",MSPointerLeave:"MSPointerOut"},function(t,n){e.event.special[t]={delegateType:n,bindType:n,handle:function(t){var r,o=this,i=t.relatedTarget,a=t.handleObj;return(!i||i!==o&&!e.contains(o,i))&&(t.type=a.origType,r=a.handler.apply(this,arguments),t.type=n),r}}})),tt=function(e){return et[e]||e},nt=/([^ ]+)/g,it.applyEventMap=function(e,t){return e=e.replace(nt,tt),t&&(e=e.replace(nt,"$1."+t)),e},rt=e.fn.on,at(!0,x,e),x.fn=x.prototype=new e,x.fn.constructor=x,x.fn.init=function(t,n){return n&&n instanceof e&&!(n instanceof x)&&(n=x(n)),e.fn.init.call(this,t,n,ot)},x.fn.init.prototype=x.fn,ot=x(document),at(x.fn,{handler:function(e){return this.data("handler",e),this},autoApplyNS:function(e){return this.data("kendoNS",e||it.guid()),this},on:function(){var e,t,n,r,o,i,a=this,s=a.data("kendoNS");return 1===arguments.length?rt.call(a,arguments[0]):(e=a,t=Ct.call(arguments),typeof t[t.length-1]===Ot&&t.pop(),n=t[t.length-1],r=it.applyEventMap(t[0],s),mt.mouseAndTouchPresent&&r.search(/mouse|click/)>-1&&this[0]!==document.documentElement&&(Z.setupMouseMute(),o=2===t.length?null:t[1],i=r.indexOf("click")>-1&&r.indexOf("touchend")>-1,rt.call(this,{touchstart:Z.muteMouse,touchend:Z.unMuteMouse},o,{bustClick:i})),typeof n===bt&&(e=a.data("handler"),n=e[n],t[t.length-1]=function(t){n.call(e,t)}),t[0]=r,rt.apply(a,t),a)},kendoDestroy:function(e){return e=e||this.data("kendoNS"),e&&this.off("."+e),this}}),it.jQuery=x,it.eventMap=et,it.timezone=function(){function e(e,t){var n,r,o,i=t[3],a=t[4],s=t[5],u=t[8];return u||(t[8]=u={}),u[e]?u[e]:(isNaN(a)?0===a.indexOf("last")?(n=new Date(Date.UTC(e,l[i]+1,1,s[0]-24,s[1],s[2],0)),r=c[a.substr(4,3)],o=n.getUTCDay(),n.setUTCDate(n.getUTCDate()+r-o-(r>o?7:0))):a.indexOf(">=")>=0&&(n=new Date(Date.UTC(e,l[i],a.substr(5),s[0],s[1],s[2],0)),r=c[a.substr(0,3)],o=n.getUTCDay(),n.setUTCDate(n.getUTCDate()+r-o+(o>r?7:0))):n=new Date(Date.UTC(e,l[i],a,s[0],s[1],s[2],0)),u[e]=n)}function t(t,n,r){var o,i,a;return(n=n[r])?(a=new Date(t).getUTCFullYear(),n=jQuery.grep(n,function(e){var t=e[0],n=e[1];return a>=t&&(n>=a||t==a&&"only"==n||"max"==n)}),n.push(t),n.sort(function(t,n){return"number"!=typeof t&&(t=Number(e(a,t))),"number"!=typeof n&&(n=Number(e(a,n))),t-n}),n[jQuery.inArray(t,n)-1]):(o=r.split(":"),i=0,o.length>1&&(i=60*o[0]+Number(o[1])),[-1e6,"max","-","Jan",1,[0,0,0],i,"-"])}function n(e,t,n){var r,o,i;if(t=t[n],!t)throw Error('Timezone "'+n+'" is either incorrect, or kendo.timezones.min.js is not included.');for(r=t.length-1;r>=0&&(o=t[r][3],!(o&&e>o));r--);if(i=t[r+1],!i)throw Error('Timezone "'+n+'" not found on '+e+".");return i}function r(e,r,o,i){typeof e!=Mt&&(e=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));var a=n(e,r,i);return{zone:a,rule:t(e,o,a[1])}}function o(e,t){var n,o,i;return"Etc/UTC"==t||"Etc/GMT"==t?0:(n=r(e,this.zones,this.rules,t),o=n.zone,i=n.rule,i?o[0]-i[6]:o[0])}function i(e,t){var n=r(e,this.zones,this.rules,t),o=n.zone,i=n.rule,a=o[2];return a.indexOf("/")>=0?a.split("/")[i&&i[6]?1:0]:a.indexOf("%s")>=0?a.replace("%s",i&&"-"!=i[7]?i[7]:""):a}function a(e,t,n){var r,o;return typeof t==bt&&(t=this.offset(e,t)),typeof n==bt&&(n=this.offset(e,n)),r=e.getTimezoneOffset(),e=new Date(e.getTime()+6e4*(t-n)),o=e.getTimezoneOffset(),new Date(e.getTime()+6e4*(o-r))}function s(e,t){return this.convert(e,e.getTimezoneOffset(),t)}function u(e,t){return this.convert(e,t,e.getTimezoneOffset())}var l={Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},c={Sun:0,Mon:1,Tue:2,Wed:3,Thu:4,Fri:5,Sat:6};return{zones:{},rules:{},offset:o,convert:a,apply:s,remove:u,abbr:i}}(),it.date=function(){function e(e,t){return 0===t&&23===e.getHours()?(e.setHours(e.getHours()+2),!0):!1}function t(t,n,r){var o=t.getHours();r=r||1,n=(n-t.getDay()+7*r)%7,t.setDate(t.getDate()+n),e(t,o)}function n(e,n,r){return e=new Date(e),t(e,n,r),e}function r(e){return new Date(e.getFullYear(),e.getMonth(),1)}function o(e){var t=new Date(e.getFullYear(),e.getMonth()+1,0),n=r(e),o=Math.abs(t.getTimezoneOffset()-n.getTimezoneOffset());return o&&t.setHours(n.getHours()+o/60),t}function i(t){return t=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0),e(t,0),t}function a(e){return 60*e.getHours()*p+e.getMinutes()*p+1e3*e.getSeconds()+e.getMilliseconds()}function s(e,t,n){var r,o=a(t),i=a(n);return e&&o!=i?(t>=n&&(n+=m),r=a(e),o>r&&(r+=m),o>i&&(i+=m),r>=o&&i>=r):!0}function u(e,t,n){var r,o=t.getTime(),i=n.getTime();return o>=i&&(i+=m),r=e.getTime(),r>=o&&i>=r}function l(t,n){var r=t.getHours();return t=new Date(t),c(t,n*m),e(t,r),t}function c(e,t,n){var r,o=e.getTimezoneOffset();e.setTime(e.getTime()+t),n||(r=e.getTimezoneOffset()-o,e.setTime(e.getTime()+r*p))}function d(){return i(new Date)}function f(e){return i(e).getTime()==d().getTime()}var p=6e4,m=864e5;return{adjustDST:e,dayOfWeek:n,setDayOfWeek:t,getDate:i,isInDateRange:u,isInTimeRange:s,isToday:f,nextDay:function(e){return l(e,1)},previousDay:function(e){return l(e,-1)},MS_PER_DAY:m,MS_PER_MINUTE:p,setTime:c,addDays:l,today:d,firstDayOfMonth:r,lastDayOfMonth:o,getMilliseconds:a}}(),it.stripWhitespace=function(e){for(var t=document.createNodeIterator(e,NodeFilter.SHOW_TEXT,function(t){return t.parentNode==e?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT},!1);t.nextNode();)t.referenceNode&&!t.referenceNode.textContent.trim()&&t.referenceNode.parentNode.removeChild(t.referenceNode)}}(jQuery,eval),"undefined"==typeof kendo_module&&(kendo_module=function(){})});("function"==typeof define&&define.amd?define:function(e,t){return t()})(["./kendo.core.min"],function(){!function(e,t){function a(t){return e.map(o(t),function(e){return e.name}).join(", ")}function o(e){var t=e[0];return t.files?n(t.files):[{name:i(t.value),extension:s(t.value),size:null}]}function n(t){return e.map(t,function(e){return r(e)})}function r(e){var t=e.name||e.fileName;return{name:k.htmlEncode(t),extension:s(t),size:e.size||e.fileSize,rawFile:e}}function s(e){var t=e.match(y);return t?t[0]:""}function i(e){var t=e.lastIndexOf("\\");return-1!=t?e.substr(t+1):e}function l(t,a,o){var n,r;a._supportsRemove()&&(n=t.data("fileNames"),r=e.map(n,function(e){return e.name}),a._submitRemove(r,o,function(e,o,r){a._removeFileEntry(t),a.trigger(C,{operation:"remove",files:n,response:e,XMLHttpRequest:r})},function(e){a.trigger(S,{operation:"remove",files:n,XMLHttpRequest:e}),w("Server response: "+e.responseText)}))}function p(t,a,o){var n=!1,r="";try{r=e.parseJSON(u(t)),n=!0}catch(s){o()}n&&a(r)}function u(e){return(t===e||""===e)&&(e="{}"),e}function d(e){e.stopPropagation(),e.preventDefault()}function c(e,t,a,o){var n,r;e.on("dragenter"+t,function(){a(),r=new Date,n||(n=setInterval(function(){var e=new Date-r;e>100&&(o(),clearInterval(n),n=null)},100))}).on("dragover"+t,function(){r=new Date})}function f(e){return e.is(".k-file-progress, .k-file-success, .k-file-error")}function m(t){return e(t.target).closest(".k-file")}function h(){var a={},o=e("meta[name=csrf-token]").attr("content"),n=e("meta[name=csrf-param]").attr("content");return e("input[name^='__RequestVerificationToken']").each(function(){a[this.name]=this.value}),n!==t&&o!==t&&(a[n]=o),a}var v,g,k=window.kendo,_=k.ui.Widget,w=k.logToConsole,y=/\.([^\.]+)$/,F=".kendoUpload",U="select",b="upload",C="success",S="error",x="complete",R="cancel",A="progress",E="remove",z=_.extend({init:function(t,a){var o,n,r,s=this;_.fn.init.call(s,t,a),s.name=t.name,s.multiple=s.options.multiple,s.localization=s.options.localization,o=s.element,s.wrapper=o.closest(".k-upload"),0===s.wrapper.length&&(s.wrapper=s._wrapInput(o)),s._activeInput(o),s.toggle(s.options.enabled),n=s._ns=F+"-"+k.guid(),o.closest("form").on("submit"+n,e.proxy(s._onParentFormSubmit,s)).on("reset"+n,e.proxy(s._onParentFormReset,s)),s.options.async.saveUrl?(s._module=s._supportsFormData()?new g(s):new v(s),s._async=!0,r=s.options.files,r.length>0&&s._renderInitialFiles(r)):s._module=new D(s),s._supportsDrop()&&s._setupDropZone(),s.wrapper.on("click",".k-upload-action",e.proxy(s._onFileAction,s)).on("click",".k-upload-selected",e.proxy(s._onUploadSelected,s))},events:[U,b,C,S,x,R,A,E],options:{name:"Upload",enabled:!0,multiple:!0,showFileList:!0,template:"",files:[],async:{removeVerb:"POST",autoUpload:!0},localization:{select:"Select files...",cancel:"Cancel",retry:"Retry",remove:"Remove",uploadSelectedFiles:"Upload files",dropFilesHere:"drop files here to upload",statusUploading:"uploading",statusUploaded:"uploaded",statusFailed:"failed",headerStatusUploading:"Uploading...",headerStatusUploaded:"Done"}},setOptions:function(e){var t=this,a=t.element;_.fn.setOptions.call(t,e),t.multiple=t.options.multiple,a.attr("multiple",t._supportsMultiple()?t.multiple:!1),t.toggle(t.options.enabled)},enable:function(e){e=t===e?!0:e,this.toggle(e)},disable:function(){this.toggle(!1)},toggle:function(e){e=t===e?e:!e,this.wrapper.toggleClass("k-state-disabled",e),this.element.prop("disabled",e)},destroy:function(){var t=this;e(document).add(e(".k-dropzone",t.wrapper)).add(t.wrapper.closest("form")).off(t._ns),e(t.element).off(F),_.fn.destroy.call(t)},_addInput:function(t){if(t[0].nodeType){var a=this,o=t.clone().val("");o.insertAfter(a.element).data("kendoUpload",a),e(a.element).hide().removeAttr("id").off(F),a._activeInput(o)}},_activeInput:function(t){var a=this,o=a.wrapper;a.element=t,t.attr("multiple",a._supportsMultiple()?a.multiple:!1).attr("autocomplete","off").on("click"+F,function(e){o.hasClass("k-state-disabled")&&e.preventDefault()}).on("focus"+F,function(){e(this).parent().addClass("k-state-focused")}).on("blur"+F,function(){e(this).parent().removeClass("k-state-focused")}).on("change"+F,e.proxy(a._onInputChange,a))},_onInputChange:function(t){var a=this,n=e(t.target),r=a.trigger(U,{files:o(n)});r?(a._addInput(n),n.remove()):a._module.onSelect(t)},_onDrop:function(t){var a,o=t.originalEvent.dataTransfer,r=this,s=o.files;d(t),s.length>0&&(a=r.trigger(U,{files:n(s)}),a||r._module.onSelect({target:e(".k-dropzone",r.wrapper)},s))},_renderInitialFiles:function(t){var a,o,n=this,r=0;for(r=0;r<t.length;r++)a=t[r],o=n._enqueueFile(a.name,{fileNames:[a]}),o.addClass("k-file-success").data("files",[t[r]]),e(".k-progress",o).width("100%"),e(".k-upload-status",o).prepend("<span class='k-upload-pct'>100%</span>"),n._fileAction(o,E)},_prepareTemplateData:function(e,t){var a=t.fileNames,o={},n=0,r=0;for(r=0;r<a.length;r++)n+=a[r].size;return o.name=e,o.size=n,o.files=t.fileNames,o},_prepareDefaultFileEntryTemplate:function(t,a){var o="",n=e("<li class='k-file'><span class='k-progress'></span><span class='k-icon'></span><span class='k-filename' title='"+t+"'>"+t+"</span>"+"<strong class='k-upload-status'></strong>"+"</li>");return 1==a.fileNames.length&&a.fileNames[0].extension&&(o=a.fileNames[0].extension.substring(1),e(".k-icon",n).addClass("k-i-"+o)),n},_enqueueFile:function(t,a){var o,n,r,s=this,i=e(".k-upload-files",s.wrapper),l=s.options,p=l.template;return 0===i.length&&(i=e("<ul class='k-upload-files k-reset'></ul>").appendTo(s.wrapper),s.options.showFileList||i.hide(),s.wrapper.removeClass("k-upload-empty")),o=e(".k-file",i),p?(r=s._prepareTemplateData(t,a),p=k.template(p),n=e("<li class='k-file'>"+p(r)+"</li>"),n.find(".k-upload-action").addClass("k-button k-button-bare")):n=s._prepareDefaultFileEntryTemplate(t,a),n.appendTo(i).data(a),s._async||e(".k-progress",n).width("100%"),!s.multiple&&o.length>0&&s._module.onRemove({target:e(o,s.wrapper)}),n},_removeFileEntry:function(t){var a,o,n=this,r=t.closest(".k-upload-files");t.remove(),a=e(".k-file",r),o=e(".k-file-success, .k-file-error",r),o.length===a.length&&this._hideUploadButton(),0===a.length&&(r.remove(),n.wrapper.addClass("k-upload-empty"),n._hideHeaderUploadstatus())},_fileAction:function(e,t){var a={remove:"k-delete",cancel:"k-cancel",retry:"k-retry"},o={remove:"k-i-close",cancel:"k-i-close",retry:"k-i-refresh"};a.hasOwnProperty(t)&&(this._clearFileAction(e),this.options.template?e.find(".k-upload-action").addClass("k-button k-button-bare").append("<span class='k-icon "+o[t]+" "+a[t]+"' title='"+this.localization[t]+"'></span>").show():(e.find(".k-upload-status .k-upload-action").remove(),e.find(".k-upload-status").append(this._renderAction(a[t],this.localization[t],o[t]))))},_fileState:function(t,a){var o=this.localization,n={uploading:{text:o.statusUploading},uploaded:{text:o.statusUploaded},failed:{text:o.statusFailed}},r=n[a];r&&e(".k-icon:not(.k-delete, .k-cancel, .k-retry)",t).text(r.text)},_renderAction:function(t,a,o){return""!==t?e("<button type='button' class='k-button k-button-bare k-upload-action'><span class='k-icon "+o+" "+t+"' title='"+a+"'></span>"+"</button>"):e("<button type='button' class='k-button'>"+a+"</button>")},_clearFileAction:function(t){e(".k-upload-action",t).empty().hide()},_onFileAction:function(t){var a,o,n,r,s=this;return s.wrapper.hasClass("k-state-disabled")||(a=e(t.target).closest(".k-upload-action"),o=a.find(".k-icon"),n=a.closest(".k-file"),r={files:n.data("fileNames")},o.hasClass("k-delete")?s.trigger(E,r)||s._module.onRemove({target:e(n,s.wrapper)},r.data):o.hasClass("k-cancel")?(s.trigger(R,r),s._module.onCancel({target:e(n,s.wrapper)}),this._checkAllComplete(),s._updateHeaderUploadStatus()):o.hasClass("k-retry")&&(e(".k-warning",n).remove(),s._module.onRetry({target:e(n,s.wrapper)}))),!1},_onUploadSelected:function(){return this._module.onSaveSelected(),!1},_onFileProgress:function(t,a){var o;this.options.template?e(".k-progress",t.target).width(a+"%"):(o=e(".k-upload-pct",t.target),0===o.length&&e(".k-upload-status",t.target).prepend("<span class='k-upload-pct'></span>"),e(".k-upload-pct",t.target).text(a+"%"),e(".k-progress",t.target).width(a+"%")),this.trigger(A,{files:m(t).data("fileNames"),percentComplete:a})},_onUploadSuccess:function(e,t,a){var o=m(e);this._fileState(o,"uploaded"),o.removeClass("k-file-progress").addClass("k-file-success"),this._updateHeaderUploadStatus(),this.trigger(C,{files:o.data("fileNames"),response:t,operation:"upload",XMLHttpRequest:a}),this._supportsRemove()?this._fileAction(o,E):this._clearFileAction(o),this._checkAllComplete()},_onUploadError:function(t,a){var o=m(t),n=e(".k-upload-pct",o);this._fileState(o,"failed"),o.removeClass("k-file-progress").addClass("k-file-error"),e(".k-progress",o).width("100%"),n.length>0?n.empty().removeClass("k-upload-pct").addClass("k-icon k-warning"):e(".k-upload-status",o).prepend("<span class='k-icon k-warning'></span>"),this._updateHeaderUploadStatus(),this._fileAction(o,"retry"),this.trigger(S,{operation:"upload",files:o.data("fileNames"),XMLHttpRequest:a}),w("Server response: "+a.responseText),this._checkAllComplete()},_showUploadButton:function(){var t=e(".k-upload-selected",this.wrapper);0===t.length&&(t=this._renderAction("",this.localization.uploadSelectedFiles).addClass("k-upload-selected")),this.wrapper.append(t)},_hideUploadButton:function(){e(".k-upload-selected",this.wrapper).remove()},_showHeaderUploadStatus:function(){var t=this.localization,a=e(".k-dropzone",this.wrapper),o=e(".k-upload-status-total",this.wrapper);0!==o.length&&o.remove(),o='<strong class="k-upload-status k-upload-status-total">'+t.headerStatusUploading+'<span class="k-icon k-loading">'+t.statusUploading+"</span>"+"</strong>",a.length>0?a.append(o):e(".k-upload-button",this.wrapper).after(o)},_updateHeaderUploadStatus:function(){var t,a,o=e(".k-file",this.wrapper).not(".k-file-success, .k-file-error");0===o.length&&(t=e(".k-upload-status-total",this.wrapper),a=e(".k-icon",t).removeClass("k-loading").addClass("k-warning").text(this.localization.statusUploaded),t.text(this.localization.headerStatusUploaded).append(a))},_hideHeaderUploadstatus:function(){e(".k-upload-status-total",this.wrapper).remove()},_onParentFormSubmit:function(){var a,o=this,n=o.element;t!==this._module.onAbort&&this._module.onAbort(),n.value||(a=e(n),a.attr("disabled","disabled"),window.setTimeout(function(){a.removeAttr("disabled")},0))},_onParentFormReset:function(){e(".k-upload-files",this.wrapper).remove()},_supportsFormData:function(){return"undefined"!=typeof FormData},_supportsMultiple:function(){var e=this._userAgent().indexOf("Windows")>-1;return!(k.support.browser.opera||k.support.browser.safari&&e)},_supportsDrop:function(){var e=this._userAgent().toLowerCase(),t=/chrome/.test(e),a=!t&&/safari/.test(e),o=a&&/windows/.test(e);return!o&&this._supportsFormData()&&this.options.async.saveUrl},_userAgent:function(){return navigator.userAgent},_setupDropZone:function(){var t,a,o=this;e(".k-upload-button",this.wrapper).wrap("<div class='k-dropzone'></div>"),t=o._ns,a=e(".k-dropzone",o.wrapper).append(e("<em>"+o.localization.dropFilesHere+"</em>")).on("dragenter"+t,d).on("dragover"+t,function(e){e.preventDefault()}).on("drop"+t,e.proxy(this._onDrop,this)),c(a,t,function(){a.addClass("k-dropzone-hovered")},function(){a.removeClass("k-dropzone-hovered")}),c(e(document),t,function(){a.addClass("k-dropzone-active"),a.closest(".k-upload").removeClass("k-upload-empty")},function(){a.removeClass("k-dropzone-active"),0===e("li.k-file",a.closest(".k-upload")).length&&a.closest(".k-upload").addClass("k-upload-empty")})},_supportsRemove:function(){return!!this.options.async.removeUrl},_submitRemove:function(t,a,o,n){var r=this,s=r.options.async.removeField||"fileNames",i=e.extend(a,h());i[s]=t,jQuery.ajax({type:this.options.async.removeVerb,dataType:"json",dataFilter:u,url:this.options.async.removeUrl,traditional:!0,data:i,success:o,error:n})},_wrapInput:function(e){var t=this,a=t.options;return e.wrap("<div class='k-widget k-upload k-header'><div class='k-button k-upload-button'></div></div>"),a.async.saveUrl||e.closest(".k-upload").addClass("k-upload-sync"),e.closest(".k-upload").addClass("k-upload-empty"),e.closest(".k-button").append("<span>"+this.localization.select+"</span>"),e.closest(".k-upload")},_checkAllComplete:function(){0===e(".k-file.k-file-progress",this.wrapper).length&&this.trigger(x)}}),D=function(e){this.name="syncUploadModule",this.element=e.wrapper,this.upload=e,this.element.closest("form").attr("enctype","multipart/form-data").attr("encoding","multipart/form-data")};D.prototype={onSelect:function(t){var n,r=this.upload,s=e(t.target);r._addInput(s),n=r._enqueueFile(a(s),{relatedInput:s,fileNames:o(s)}),r._fileAction(n,E)},onRemove:function(e){var t=m(e);t.data("relatedInput").remove(),this.upload._removeFileEntry(t)}},v=function(e){this.name="iframeUploadModule",this.element=e.wrapper,this.upload=e,this.iframes=[]},z._frameId=0,v.prototype={onSelect:function(t){var a=this.upload,o=e(t.target),n=this.prepareUpload(o);a.options.async.autoUpload?this.performUpload(n):(a._supportsRemove()&&this.upload._fileAction(n,E),a._showUploadButton())},prepareUpload:function(t){var n,r,s,i=this.upload,l=e(i.element),p=i.options.async.saveField||t.attr("name");return i._addInput(t),t.attr("name",p),n=this.createFrame(i.name+"_"+z._frameId++),this.registerFrame(n),r=this.createForm(i.options.async.saveUrl,n.attr("name")).append(l),s=i._enqueueFile(a(t),{frame:n,relatedInput:l,fileNames:o(t)}),n.data({form:r,file:s}),s},performUpload:function(t){var a,o,n,r={files:t.data("fileNames")},s=t.data("frame"),i=this.upload;if(i.trigger(b,r))i._removeFileEntry(s.data("file")),this.cleanupFrame(s),this.unregisterFrame(s);else{i._hideUploadButton(),i._showHeaderUploadStatus(),s.appendTo(document.body),a=s.data("form").appendTo(document.body),r.data=e.extend({},r.data,h());for(o in r.data)n=a.find("input[name='"+o+"']"),0===n.length&&(n=e("<input>",{type:"hidden",name:o}).appendTo(a)),n.val(r.data[o]);i._fileAction(t,R),i._fileState(t,"uploading"),e(t).addClass("k-file-progress"),s.one("load",e.proxy(this.onIframeLoad,this)),a[0].submit()}},onSaveSelected:function(){var t=this;e(".k-file",this.element).each(function(){var a=e(this),o=f(a);o||t.performUpload(a)})},onIframeLoad:function(t){var a,o=e(t.target);try{a=o.contents().text()}catch(n){a="Error trying to get server response: "+n}this.processResponse(o,a)},processResponse:function(t,a){var o=t.data("file"),n=this,r={responseText:a};p(a,function(a){e.extend(r,{statusText:"OK",status:"200"}),n.upload._onFileProgress({target:e(o,n.upload.wrapper)},100),n.upload._onUploadSuccess({target:e(o,n.upload.wrapper)},a,r),n.cleanupFrame(t),n.unregisterFrame(t)},function(){e.extend(r,{statusText:"error",status:"500"}),n.upload._onUploadError({target:e(o,n.upload.wrapper)},r)})},onCancel:function(t){var a=e(t.target).data("frame");this.stopFrameSubmit(a),this.cleanupFrame(a),this.unregisterFrame(a),this.upload._removeFileEntry(a.data("file"))},onRetry:function(e){var t=m(e);this.performUpload(t)},onRemove:function(e,t){var a=m(e),o=a.data("frame");o?(this.unregisterFrame(o),this.upload._removeFileEntry(a),this.cleanupFrame(o)):l(a,this.upload,t)},onAbort:function(){var t=this.element,a=this;e.each(this.iframes,function(){e("input",this.data("form")).appendTo(t),a.stopFrameSubmit(this[0]),this.data("form").remove(),this.remove()}),this.iframes=[]},createFrame:function(t){return e("<iframe name='"+t+"'"+" id='"+t+"'"+" style='display:none;' />")},createForm:function(t,a){return e("<form enctype='multipart/form-data' method='POST' action='"+t+"'"+" target='"+a+"'"+"/>")},stopFrameSubmit:function(e){t!==e.stop?e.stop():e.document&&e.document.execCommand("Stop")},registerFrame:function(e){this.iframes.push(e)},unregisterFrame:function(t){this.iframes=e.grep(this.iframes,function(e){return e.attr("name")!=t.attr("name")})},cleanupFrame:function(e){var t=e.data("form");e.data("file").data("frame",null),setTimeout(function(){t.remove(),e.remove()},1)}},g=function(e){this.name="formDataUploadModule",this.element=e.wrapper,this.upload=e},g.prototype={onSelect:function(t,a){var o=this.upload,r=this,s=e(t.target),i=a?n(a):this.inputFiles(s),l=this.prepareUpload(s,i);e.each(l,function(){o.options.async.autoUpload?r.performUpload(this):(o._supportsRemove()&&o._fileAction(this,E),o._showUploadButton())})},prepareUpload:function(t,a){var o=this.enqueueFiles(a);return t.is("input")&&(e.each(o,function(){e(this).data("relatedInput",t)}),t.data("relatedFileEntries",o),this.upload._addInput(t)),o},enqueueFiles:function(t){var a,o,n,r,s=this.upload,i=t.length,l=[];if(s.options.async.batch===!0)a=e.map(t,function(e){return e.name}).join(", "),r=s._enqueueFile(a,{fileNames:t}),r.data("files",t),l.push(r);else for(o=0;i>o;o++)n=t[o],a=n.name,r=s._enqueueFile(a,{fileNames:[n]}),r.data("files",[n]),l.push(r);return l},inputFiles:function(e){return o(e)},performUpload:function(t){var a,o=this.upload,n=this.createFormData(t.data("files")),r=new XMLHttpRequest,s={files:t.data("fileNames"),XMLHttpRequest:r};if(o.trigger(b,s))this.removeFileEntry(t);else{o._fileAction(t,R),o._hideUploadButton(),o._showHeaderUploadStatus(),s.data=e.extend({},s.data,h());for(a in s.data)n.append(a,s.data[a]);o._fileState(t,"uploading"),e(t).addClass("k-file-progress"),this.postFormData(o.options.async.saveUrl,n,t,r)}},onSaveSelected:function(){var t=this;e(".k-file",this.element).each(function(){var a=e(this),o=f(a);o||t.performUpload(a)})},onCancel:function(e){var t=m(e);this.stopUploadRequest(t),this.removeFileEntry(t)},onRetry:function(e){var t=m(e);this.performUpload(t)},onRemove:function(e,t){var a=m(e);a.hasClass("k-file-success")?l(a,this.upload,t):this.removeFileEntry(a)},postFormData:function(e,t,a,o){var n=this;a.data("request",o),o.addEventListener("load",function(e){n.onRequestSuccess.call(n,e,a)},!1),o.addEventListener(S,function(e){n.onRequestError.call(n,e,a)},!1),o.upload.addEventListener("progress",function(e){n.onRequestProgress.call(n,e,a)},!1),o.open("POST",e,!0),o.withCredentials="true",o.send(t)},createFormData:function(e){var t,a=new FormData,o=this.upload,n=e.length;for(t=0;n>t;t++)a.append(o.options.async.saveField||o.name,e[t].rawFile);return a},onRequestSuccess:function(t,a){function o(){r.upload._onUploadError({target:e(a,r.upload.wrapper)},n)}var n=t.target,r=this;n.status>=200&&n.status<=299?p(n.responseText,function(t){r.upload._onFileProgress({target:e(a,r.upload.wrapper)},100),r.upload._onUploadSuccess({target:e(a,r.upload.wrapper)},t,n),r.cleanupFileEntry(a)},o):o()},onRequestError:function(t,a){var o=t.target;this.upload._onUploadError({target:e(a,this.upload.wrapper)},o)},cleanupFileEntry:function(t){var a=t.data("relatedInput"),o=!0;a&&(e.each(a.data("relatedFileEntries")||[],function(){this.parent().length>0&&this[0]!=t[0]&&(o=o&&this.hasClass("k-file-success"))}),o&&a.remove())},removeFileEntry:function(e){this.cleanupFileEntry(e),this.upload._removeFileEntry(e)},onRequestProgress:function(t,a){var o=Math.round(100*t.loaded/t.total);this.upload._onFileProgress({target:e(a,this.upload.wrapper)},o)},stopUploadRequest:function(e){e.data("request").abort()}},k.ui.plugin(z)}(window.kendo.jQuery)});